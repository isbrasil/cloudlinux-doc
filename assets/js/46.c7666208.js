(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{369:function(t,a,e){"use strict";e.r(a);var s=e(35),n=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"x-ray-beta"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x-ray-beta","aria-hidden":"true"}},[t._v("#")]),t._v(" X-Ray (BETA)")]),t._v(" "),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),e("p",[t._v("Please note that "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" is a new experimental tool. It is in beta testing now. If you’d like to be a beta tester, please fill out "),e("a",{attrs:{href:"https://cln.cloudlinux.com/console/dashboard/products",target:"_blank",rel:"noopener noreferrer"}},[t._v("this form"),e("OutboundLink")],1),t._v(". You will be able to use the X-Ray tool after receiving the CLN manager approval.")])]),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("Warning!")]),e("p",[t._v("X-Ray is available only for CloudLinux OS licenses purchased directly, NOT VIA RESELLERS.")])]),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("Warning!")]),e("p",[t._v("X-Ray is available for cPanel, Plesk, and DirectAdmin.")]),t._v(" "),e("ul",[e("li",[t._v("X-Ray for non-panel installations is not planned.")])])]),e("h2",{attrs:{id:"description"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#description","aria-hidden":"true"}},[t._v("#")]),t._v(" Description")]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" is a tool developed for website performance monitoring and performance issues detection.")]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" can gather and visualize information about top N slowest system functions, external requests, software modules and database queries of the client’s website.")]),t._v(" "),e("p",[t._v("First release of "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" is offered for cPanel administrators and support to find the cause of website performance issues.")]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" can monitor websites that were developed on cPanel hosts and use PHP (see "),e("RouterLink",{attrs:{to:"/x-ray/#list-of-supported-php-versions"}},[t._v("PHP version list")]),t._v(") or WordPress.")],1),t._v(" "),e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Make sure you have installed "),e("strong",[t._v("LVE Manager version 6.2 or later")]),t._v(". You can install it with the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# yum install lvemanager --enablerepo=cloudlinux-updates-testing\n")])])])])]),t._v(" "),e("li",[e("p",[t._v("Run the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# rhn_check\n")])])])]),t._v(" "),e("p",[t._v("If the "),e("code",[t._v("rhn_check")]),t._v(" command is not found, run the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# yum install rhn-check rhn-setup --enablerepo=cloudlinux-updates-testing\n")])])])])]),t._v(" "),e("li",[e("p",[t._v("Then install the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("alt-php-xray")])]),t._v(" package")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Via user interface")]),t._v(" "),e("ul",[e("li",[t._v("Go to the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("X-Ray")])]),t._v(" tab.")]),t._v(" "),e("li",[t._v("Click "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Install")])]),t._v(" to start installation.")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayUI.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("Via SSH by running the following command:")])])]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# yum install lvemanager alt-php-xray --enablerepo=cloudlinux-updates-testing\n")])])])])]),t._v(" "),e("li",[e("p",[t._v("After installation, use the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Start tracing")])]),t._v(" button to create your first tracing task for a slow site.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayStartTracing.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"how-to-manage-x-ray"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-manage-x-ray","aria-hidden":"true"}},[t._v("#")]),t._v(" How to manage X-Ray")]),t._v(" "),e("h3",{attrs:{id:"create-a-new-tracing-task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-tracing-task","aria-hidden":"true"}},[t._v("#")]),t._v(" Create a new tracing task")]),t._v(" "),e("ol",[e("li",[t._v("Go to the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("X-Ray")])]),t._v(" tab")]),t._v(" "),e("li",[t._v("Click the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Start tracing")])]),t._v(" button to create a new task")]),t._v(" "),e("li",[t._v("In the opened popup specify a website URL to trace")]),t._v(" "),e("li",[t._v("Click the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Run")])]),t._v(" button")]),t._v(" "),e("li",[t._v("Tracing will run in the default mode. In the default mode "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" traces the first 20 requests for a specified URL")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayTracingTask.png",alt:""}})]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("URL")]),t._v(" should be a valid URL of the domain which exists on the current hosting server. The URL field supports wildcard matching. To learn more about wildcard matching, click "),e("em",[t._v("How to use special characters")]),t._v(".")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Advanced settings")]),t._v(" allow you to set an IP address and tracing options: by time or by number of queries.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayAdvanced.png",alt:""}})])])]),t._v(" "),e("h4",{attrs:{id:"advanced-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#advanced-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Advanced settings")]),t._v(" "),e("ul",[e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Client’s IP")])]),t._v(": it is an IPv4 address of a machine to trace. For example, if you have a production website that processes requests from different IP addresses and you do not want to add these requests to the tracing task. So, you can set a specific IP address and "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" will analyze requests only from this specific IP address.\nRecord for")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Time period")])]),t._v(": how much time "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" collect the requests (2 days max)")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Requests")])]),t._v(": the amount of requests that "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" will collect")])]),t._v(" "),e("p",[t._v("After creating, the task appears in the list of tracing tasks.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayTrcingTaskList.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"view-tracing-tasks-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-tracing-tasks-list","aria-hidden":"true"}},[t._v("#")]),t._v(" View tracing tasks list")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayTrcingTaskList1.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"tracing-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tracing-status","aria-hidden":"true"}},[t._v("#")]),t._v(" Tracing status")]),t._v(" "),e("p",[t._v("A tracing task can have the following statuses:")]),t._v(" "),e("ul",[e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Running")])]),t._v(" – tracing is in progress")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Stopped")])]),t._v(" – tracing was stopped by administrator")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("On hold")])]),t._v(" – the same URL already exists in the lists. Task processing will not start automatically. Administrator should start it manually.")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Completed")])]),t._v(" – period of time is finished or number of requests is reached.")])]),t._v(" "),e("h3",{attrs:{id:"stop-tracing-task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stop-tracing-task","aria-hidden":"true"}},[t._v("#")]),t._v(" Stop tracing task")]),t._v(" "),e("p",[t._v("Click "),e("img",{attrs:{src:"/images/XRayStop.png",alt:""}}),t._v(" to stop the tracing task.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayStopped.png",alt:""}})]),t._v(" "),e("p",[t._v("The tracing task status will be changed to "),e("span",{staticClass:"notranslate"},[e("strong",[t._v("Stopped")])]),t._v(". Data will not be collected anymore but you can see already collected information or continue tracing later by clicking "),e("img",{attrs:{src:"/images/XRayStart.png",alt:""}}),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"delete-tracing-task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delete-tracing-task","aria-hidden":"true"}},[t._v("#")]),t._v(" Delete tracing task")]),t._v(" "),e("p",[t._v("Click "),e("img",{attrs:{src:"/images/XRayDelete.png",alt:""}}),t._v(" to delete the tracing task.")]),t._v(" "),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("Warning!")]),e("p",[t._v("When you have deleted a tracing task, all collected data will be unavailable.")])]),e("h3",{attrs:{id:"view-collected-requests-for-tracing-task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#view-collected-requests-for-tracing-task","aria-hidden":"true"}},[t._v("#")]),t._v(" View collected requests for tracing task")]),t._v(" "),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("Warning!")]),e("p",[t._v("Collected requests are available in the UI for two weeks.")])]),e("p",[t._v("Click "),e("img",{attrs:{src:"/images/XRayView.png",alt:""}}),t._v(" to open a list of collected requests.")]),t._v(" "),e("h4",{attrs:{id:"tracing-tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tracing-tasks","aria-hidden":"true"}},[t._v("#")]),t._v(" Tracing tasks")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayCollectedRequests.png",alt:""}})]),t._v(" "),e("p",[t._v("The slowest request is highlighted.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRaySlowestRequest.png",alt:""}})]),t._v(" "),e("ul",[e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Collected requests")])]),t._v(" displays how many requests were collected according to tasks requirements.")]),t._v(" "),e("li",[e("span",{staticClass:"notranslate"},[e("strong",[t._v("Pending requests")])]),t._v(" displays how many of collected requests are not visible in the table yet.")])]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" collects the following data for each request:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Top issues")]),t._v(" – the slowest items of a request")]),t._v(" "),e("li",[e("strong",[t._v("Software modules/plugins")]),t._v(" by execution time (only for WordPress plugins)")]),t._v(" "),e("li",[e("strong",[t._v("Database queries")]),t._v(" by execution time")]),t._v(" "),e("li",[e("strong",[t._v("External requests")]),t._v(" by execution time")]),t._v(" "),e("li",[e("strong",[t._v("Other system functions")]),t._v(" by execution time")])]),t._v(" "),e("h4",{attrs:{id:"software-modules-plugins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#software-modules-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Software modules/plugins")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRaySoftwareModulesPlugins.png",alt:""}})]),t._v(" "),e("p",[t._v("The "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Software modules/plugins")])]),t._v(" section displays the following data:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Software type")]),t._v(" – a type a module/plugin. For now, "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" can analyze only WordPress software")]),t._v(" "),e("li",[e("strong",[t._v("Software module")]),t._v(" – a name of the WordPress plugin")]),t._v(" "),e("li",[e("strong",[t._v("Duration")]),t._v(" – plugin execution time")]),t._v(" "),e("li",[e("strong",[t._v("Duration (%)")]),t._v(" – plugin execution time as a percentage of the total duration of the request")])]),t._v(" "),e("h4",{attrs:{id:"database-queries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#database-queries","aria-hidden":"true"}},[t._v("#")]),t._v(" Database queries")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayDatabaseQueries.png",alt:""}})]),t._v(" "),e("p",[t._v("The "),e("span",{staticClass:"notranslate"},[e("em",[t._v("Database queries")])]),t._v(" section displays the following data:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Query")]),t._v(" – the executed SQL-query")]),t._v(" "),e("li",[e("strong",[t._v("File")]),t._v(" – the file and the line of the executed query and backtrace")]),t._v(" "),e("li",[e("strong",[t._v("Software module")]),t._v(" – a WordPress plugin name from which the request was completed. If the request does not belong to any of the WordPress plugin, the name of the function that executed the given request is displayed")]),t._v(" "),e("li",[e("strong",[t._v("Calls")]),t._v(" – the number of identical SQL queries")]),t._v(" "),e("li",[e("strong",[t._v("Duration")]),t._v(" – execution time as a percentage of the total duration of a request and the function processing time (in brackets)")])]),t._v(" "),e("h4",{attrs:{id:"external-requests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#external-requests","aria-hidden":"true"}},[t._v("#")]),t._v(" External requests")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayExternalRequests.png",alt:""}})]),t._v(" "),e("p",[t._v("The "),e("span",{staticClass:"notranslate"},[e("em",[t._v("External requests")])]),t._v(" section displays the following data:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("URL")]),t._v(" – the URL of the executed request")]),t._v(" "),e("li",[e("strong",[t._v("File")]),t._v(" – the file and the line of the executed request and backtrace")]),t._v(" "),e("li",[e("strong",[t._v("Duration")]),t._v(" – execution time as a percentage of the total duration of a request and the function processing time (in brackets)")])]),t._v(" "),e("h4",{attrs:{id:"system-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#system-functions","aria-hidden":"true"}},[t._v("#")]),t._v(" System functions")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRaySystemFunctions.png",alt:""}})]),t._v(" "),e("p",[t._v("The "),e("span",{staticClass:"notranslate"},[e("em",[t._v("System functions")])]),t._v(" section displays the following data:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Function")]),t._v(" – the executed function")]),t._v(" "),e("li",[e("strong",[t._v("File")]),t._v(" – the file and the line of the executed request")]),t._v(" "),e("li",[e("strong",[t._v("Duration")]),t._v(" – execution time as a percentage of the total duration of a request and the function processing time (in brackets)")])]),t._v(" "),e("h2",{attrs:{id:"x-ray-client"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x-ray-client","aria-hidden":"true"}},[t._v("#")]),t._v(" X-Ray client")]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" client is a PHP extension named "),e("span",{staticClass:"notranslate"},[e("code",[t._v("xray.so")])]),t._v(". It analyzes the processing time of the entire request and its parts and then sends the data to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent.")]),t._v(" "),e("h3",{attrs:{id:"list-of-supported-php-versions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list-of-supported-php-versions","aria-hidden":"true"}},[t._v("#")]),t._v(" List of supported PHP versions")]),t._v(" "),e("p",[t._v("The list of currently supported PHP versions:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th"),t._v(" "),e("th")])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("ALT PHP")]),t._v(":")]),t._v(" "),e("td",[e("strong",[t._v("EA PHP")]),t._v(":")]),t._v(" "),e("td",[e("strong",[t._v("Plesk PHP")])])]),t._v(" "),e("tr",[e("td",[e("ul",[e("li",[t._v("alt-php54")]),e("li",[t._v("alt-php55")]),e("li",[t._v("alt-php56")]),e("li",[t._v("alt-php70")]),e("li",[t._v("alt-php71")]),e("li",[t._v("alt-php72")]),e("li",[t._v("alt-php73")]),e("li",[t._v("alt-php74")])])]),t._v(" "),e("td",[e("ul",[e("li",[t._v("ea-php54")]),e("li",[t._v("ea-php55")]),e("li",[t._v("ea-php56")]),e("li",[t._v("ea-php70")]),e("li",[t._v("ea-php71")]),e("li",[t._v("ea-php72")]),e("li",[t._v("ea-php73")]),e("li",[t._v("ea-php74")])])]),t._v(" "),e("td",[e("ul",[e("li",[t._v("php54")]),e("li",[t._v("php55")]),e("li",[t._v("php56")]),e("li",[t._v("php70")]),e("li",[t._v("php71")]),e("li",[t._v("php72")]),e("li",[t._v("php73")]),e("li",[t._v("php74")])])])])])]),t._v(" "),e("h3",{attrs:{id:"functions-that-x-ray-client-can-hook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#functions-that-x-ray-client-can-hook","aria-hidden":"true"}},[t._v("#")]),t._v(" Functions that X-Ray client can hook")]),t._v(" "),e("h4",{attrs:{id:"database-queries-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#database-queries-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Database queries")]),t._v(" "),e("ul",[e("li",[t._v("Functions from "),e("a",{attrs:{href:"https://www.php.net/manual/ru/book.mysql.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL"),e("OutboundLink")],1),t._v(" extension:\n"),e("ul",[e("li",[e("code",[t._v("mysql_query")])]),t._v(" "),e("li",[e("code",[t._v("mysql_db_query")])]),t._v(" "),e("li",[e("code",[t._v("mysql_unbuffered_query")])])])]),t._v(" "),e("li",[t._v("Functions from "),e("a",{attrs:{href:"https://www.php.net/manual/ru/book.mysqli.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQLi"),e("OutboundLink")],1),t._v(" extension:\n"),e("ul",[e("li",[e("code",[t._v("mysqli_query")])]),t._v(" "),e("li",[e("code",[t._v("mysqli::query")])]),t._v(" "),e("li",[e("code",[t._v("mysqli_multi_query")])]),t._v(" "),e("li",[e("code",[t._v("mysqli::multi_query")])]),t._v(" "),e("li",[e("code",[t._v("mysqli_real_query")])]),t._v(" "),e("li",[e("code",[t._v("mysqli::real_query")])])])]),t._v(" "),e("li",[t._v("Functions from "),e("a",{attrs:{href:"https://www.php.net/manual/ru/book.pdo.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("PDO"),e("OutboundLink")],1),t._v(" extension:\n"),e("ul",[e("li",[e("code",[t._v("PDO::exec")])]),t._v(" "),e("li",[e("code",[t._v("PDO::query")])]),t._v(" "),e("li",[e("code",[t._v("PDOStatement::execute")])])])])]),t._v(" "),e("h4",{attrs:{id:"external-requests-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#external-requests-2","aria-hidden":"true"}},[t._v("#")]),t._v(" External requests")]),t._v(" "),e("ul",[e("li",[t._v("Function "),e("a",{attrs:{href:"https://www.php.net/manual/ru/function.exec",target:"_blank",rel:"noopener noreferrer"}},[t._v("curl_exec"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"system-php-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#system-php-functions","aria-hidden":"true"}},[t._v("#")]),t._v(" System PHP functions")]),t._v(" "),e("p",[t._v("It may be any PHP system function which can be related to a PHP engine or other PHP extension, for example "),e("code",[t._v("fopen()")]),t._v(" or "),e("code",[t._v("json_encode()")]),t._v(". A list of these functions can be found "),e("a",{attrs:{href:"https://www.php.net/manual/en/indexes.functions.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"configuration-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-options","aria-hidden":"true"}},[t._v("#")]),t._v(" Configuration Options")]),t._v(" "),e("h4",{attrs:{id:"xray-enabled"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-enabled","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.enabled")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.enabled=On/Off")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": On")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": Enable or disable "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" extension from php.ini")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-database-queries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-database-queries","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.database_queries")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.database_queries=[number]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": 20")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": The number of the slowest SQL queries which will be sent to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent. The min value is 0 and the max value is 100. If the variable value is more, the default value will be used.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-external-requests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-external-requests","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.external_requests")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.external_requests=[number]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": 20")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": The number of the slowest external requests (the curl_exec function) which will be sent to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent. The min value is 0 and the max value is 100. If the variable value is more, the default value will be used.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-system-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-system-functions","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.system_functions")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.system_functions=[number]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": 20")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": The number of the slowest system functions which will be sent to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent.\nThe min value is 0 and the max value is 100. If the variable value is more, the default value will be used.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-backtrace-depth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-backtrace-depth","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.backtrace_depth")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.backtrace_depth=[number]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": 10")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": The backtrace depth to the main() function which will be sent to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent. The min value is 0 and the max value is 20. If the variable value is more, the default value will be used.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-processor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-processor","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.processor")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.processor=[processor_name]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": xray")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(":  PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": Tells the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" client which processor to use. The new processors may be added in the future. The default processor is xray which means to send data to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-tasks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-tasks","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.tasks")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.tasks=host:uri:ip:id")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": no value")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(":  PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": The current tracing tasks for the given PHP request. This directive is added automatically by the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" manager when creating a task. It is not allowed to edit manually, as "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" may stop working.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-to-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-to-file","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.to_file")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.to_file=On/Off")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": Off")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(":  PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": Only for debug purposes. Writes to a file data which is sent to the processor.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-debug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-debug","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.debug")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.debug=On/Off")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": Off")]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": Only for debug purposes. Enables debug output during request processing. In the On mode can slow down the domain.")]),t._v(" "),e("hr"),t._v(" "),e("h4",{attrs:{id:"xray-debug-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xray-debug-file","aria-hidden":"true"}},[t._v("#")]),t._v(" xray.debug_file")]),t._v(" "),e("p",[e("strong",[t._v("Syntax")]),t._v(": "),e("code",[t._v("xray.debug_file=[path_to_file]")])]),t._v(" "),e("p",[e("strong",[t._v("Default")]),t._v(": "),e("code",[t._v("/tmp/xray-debug.log")])]),t._v(" "),e("p",[e("strong",[t._v("Changeable")]),t._v(": PHP_INI_SYSTEM")]),t._v(" "),e("p",[e("strong",[t._v("Description")]),t._v(": Only for debug purposes. Specifies a file for logging debug information.")]),t._v(" "),e("h2",{attrs:{id:"x-ray-agent"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x-ray-agent","aria-hidden":"true"}},[t._v("#")]),t._v(" X-Ray agent")]),t._v(" "),e("p",[t._v("This is a service that receives data from the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" client and sends it to the remote storage.")]),t._v(" "),e("h3",{attrs:{id:"managing-x-ray-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#managing-x-ray-service","aria-hidden":"true"}},[t._v("#")]),t._v(" Managing X-Ray service")]),t._v(" "),e("p",[t._v("The "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent is managed by the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("service")])]),t._v(" utility.")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("To start the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent, run the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# service xray-agent start\n")])])])])]),t._v(" "),e("li",[e("p",[t._v("To stop the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent, run the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# service xray-agent stop\n")])])])])]),t._v(" "),e("li",[e("p",[t._v("To restart the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent, run the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# service xray-agent restart\n")])])])])])]),t._v(" "),e("h2",{attrs:{id:"faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),e("h3",{attrs:{id:"does-x-ray-affect-website-performance"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#does-x-ray-affect-website-performance","aria-hidden":"true"}},[t._v("#")]),t._v(" Does X-Ray affect website performance?")]),t._v(" "),e("p",[e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" affects website performance. Our tests show 5-10 % overhead from a website loading time with "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" tracing enabled.\n"),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" allows you to find website performance issues and should not be enabled permanently. If your website is very slow, you can enable "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" to find the cause and then disable it.")]),t._v(" "),e("h3",{attrs:{id:"what-should-i-do-if-i-see-the-warning-task-is-duplicated-by-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-should-i-do-if-i-see-the-warning-task-is-duplicated-by-url","aria-hidden":"true"}},[t._v("#")]),t._v(' What should I do if I see the warning "Task is duplicated by URL"?')]),t._v(" "),e("p",[t._v("This warning means that you already have a task to trace this URL in the list of your tracing tasks. If you see this warning, a new task can be created only with the "),e("span",{staticClass:"notranslate"},[e("em",[t._v("On hold")])]),t._v(" status and you will be able to run it only when the previous task with the same URL will be completed.")]),t._v(" "),e("p",[t._v("Note that the URL field supports wildcard matching and you can have a case when "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" is tracing the "),e("code",[t._v("URL=domain.com/*")]),t._v(" and you are trying to create a new task with "),e("code",[t._v("URL=domain.com/xray.php")]),t._v(". In this case, you will see that warning because the "),e("code",[t._v("*")]),t._v(" URLs array includes "),e("code",[t._v("xray.php")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"i-started-a-tracing-task-and-made-requests-to-url-but-did-not-see-any-results-in-the-ui-what-should-i-do"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-started-a-tracing-task-and-made-requests-to-url-but-did-not-see-any-results-in-the-ui-what-should-i-do","aria-hidden":"true"}},[t._v("#")]),t._v(" I started a tracing task and made requests to URL but did not see any results in the UI. What should I do?")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Check that "),e("span",{staticClass:"notranslate"},[e("strong",[t._v("xray")])]),t._v(" extension is enabled for the domain. To do so, go to the "),e("code",[t._v("phpinfo()")]),t._v(" page and make a request. In the phpinfo output try to find the following section:")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayPHPInfo.png",alt:""}})])])]),t._v(" "),e("p",[t._v("If you cannot see that section, try to restart PHP processes for that user (the simplest way is to restart Apache) and check that you can see the "),e("span",{staticClass:"notranslate"},[e("strong",[t._v("xray")])]),t._v(" extension.")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[t._v("If you can see the "),e("span",{staticClass:"notranslate"},[e("strong",[t._v("xray")])]),t._v(" extension in the phpinfo, check that "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" agent service is running with the service xray-agent status command. If it is not running, start it with the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("service xray-agent start")])]),t._v(" command.")])]),t._v(" "),e("li",[e("p",[t._v("If you set a client’s IP when creating the tracing task, check that your requests come to the server with this IP via phpinfo (since there may be NAT between your local machine and the server).")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayPHPInfoRemoteAddr.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("If, after checking the previous items, the issue persists, "),e("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/en-us/requests/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("contact our support team"),e("OutboundLink")],1),t._v(".")])])]),t._v(" "),e("h3",{attrs:{id:"what-to-do-if-x-ray-is-not-found-in-the-phpinfo-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-to-do-if-x-ray-is-not-found-in-the-phpinfo-page","aria-hidden":"true"}},[t._v("#")]),t._v(" What to do if X-Ray is not found in the phpinfo() page?")]),t._v(" "),e("p",[t._v("If you managed to create a tracing task, this means that the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("xray.ini")])]),t._v(" file was created in a system. Therefore, there may be two reasons why it did not appear in the phpinfo page of the domain.")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("PHP process wasn't reloaded after adding the xray.ini. To solve this, you should restart the Apache or fpm service for the domain on which the tracing was started. At the moment, this is done automatically by the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" manager after creating the task.")])]),t._v(" "),e("li",[e("p",[t._v("Your domain uses a PHP version different from the one which was detected by the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" manager. To solve this, check the scan dir for additional ini files for your domain.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/images/XRayScanDir.png",alt:""}})]),t._v(" "),e("p",[t._v("Then check the "),e("code",[t._v("ini_location")]),t._v(" that was passed to the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" manager by running the following command:")]),t._v(" "),e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# cat /usr/share/alt-php-xray/manager.log | grep ini_location\n")])])])]),t._v(" "),e("p",[t._v("Find your tracing task in the output and check that the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("xray.ini")])]),t._v(" exists in this directory, also check that the "),e("code",[t._v("ini")]),t._v(" path is the same in the phpinfo page output and in the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("ini_location")])]),t._v(" directive for your tracing task. If they are the same, you should reload your PHP. If they are different that means that the "),e("span",{staticClass:"notranslate"},[t._v("X-Ray")]),t._v(" manager could not correctly determine the PHP version your domain uses. In this case, contact our support team at "),e("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/requests/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloudlinux.zendesk.com/hc/requests/new"),e("OutboundLink")],1),t._v(".")])])]),t._v(" "),e("h3",{attrs:{id:"i-use-litespeed-x-ray-is-enabled-and-it-is-shown-in-the-phpinfo-page-but-does-not-collect-data-when-sending-requests-to-a-site-what-to-do"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-use-litespeed-x-ray-is-enabled-and-it-is-shown-in-the-phpinfo-page-but-does-not-collect-data-when-sending-requests-to-a-site-what-to-do","aria-hidden":"true"}},[t._v("#")]),t._v(" I use LiteSpeed, X-Ray is enabled and it is shown in the phpinfo() page but does not collect data when sending requests to a site. What to do?")]),t._v(" "),e("p",[t._v("Check for the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("CacheLookup on")])]),t._v(" option in the "),e("code",[t._v("htaccess")]),t._v(" file for your domain.\nIf the option is there, LiteSpeed processes requests bypassing the PHP X-Ray extension.\nIn this case, to get tracing information, you should remove the "),e("span",{staticClass:"notranslate"},[e("code",[t._v("CacheLookup on")])]),t._v(" option.")]),t._v(" "),e("Disqus")],1)},[],!1,null,null,null);a.default=n.exports}}]);